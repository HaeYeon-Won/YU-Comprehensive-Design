# 졸업작품 주제

## 이동체의 포트홀 인식을 통한 포트홀 위치 정보 조회 시스템과 포트홀에서의 카메라/센서 수평 오차 저감 장치

- update
  - ver0(2021-01-04), 포트홀 인식 후 이미지와 gps 좌표를 server로 넘기고 포트홀에서 흔들림 발생 시 서보모터를 이용한 카메라/센서의 수평 유지
    + server에서 현재 1대1 socket 통신만 가능 -> 다중 connect가 되도록 수정 (이외의 네트워크 상태에 따른 기능 ack, timeout 등 고려)
    + 서보모터를 이용한 수평 유지 기능의 반응속도, 정확성 향상 필요 -> 실험을 통한 수정
    + 수평 유지 기능을 적용할 하드웨어 구현 필요
  - ver1(2021-06-17), 포트홀 인식 후 이미지와 gps 좌표를 server로 넘기고 포트홀에서 흔들림 발생 시 서보모터를 이용한 카메라/센서의 수평 유지
    + server의 다중 connect 기능 추가
    + 서보모터를 이용한 수평 유지 기능의 반응속도 및 정확성 향상
    + 하드웨어 구현 완료
    + 관리자 검색 웹 사이트 개선
### 주제 선정
![image](https://user-images.githubusercontent.com/78334910/174302914-a16fdb81-07e7-45c0-85a2-8153a6f20e9b.png)  
- 최근 5년간 포트홀로 인한 피해보상 금액은 날로 증가중이고, 이를 효율적으로 처리하기 위한 방안 모색중.
- 이를 해결하기 위해서 차량에 카메라를 이용하여 포트홀을 위치 정보를 파악해 포트홀 유지 및 보수를 도울 예정.

### 기능 블록도
![image](https://user-images.githubusercontent.com/78334910/174300420-c102fbab-2d39-4e02-bdb8-51345d59d716.png)  
- client인 차량에서 포트홀을 인식 시, 해당 포트홀 이미지와 neo-7m을 이용하여 gps 좌표를 server로 socket 통신을 통해 데이터 전송 / 주행 중 차량의 흔들림을 잡아주기 위해 mpu-6050로 부터 센서 값을 가져오고 상보필터를 이용하여 차량의 기울어진 각도를 측정하여 servo 모터를 통해 기울어진 각도의 반대 방향으로 보정하는 2축 짐벌 기능 구현.
- server에서는 포트홀 이미지, gps 좌표를 받았을 시 gps 좌표를 이용하여 db(MySQL) 내에 해당 데이터가 존재하는지 확인 데이터가 없는 경우 db에 저장, 데이터가 존재하는 경우 검출 횟수를 늘림 -> 이 검출 횟수는 관리자 검색 웹 사이트에서 데이터를 출력하는 우선 순위로 사용.
- server에서는 flask를 이용하여 웹 서버 기능 구현.
- web은 검색 사이트, 검색한 위치의 포트홀 데이터 리스트 사이트, 선택된 포트홀의 세부 정보 사이트로 나누어지고 검색 사이트에서는 관리자가 포트홀 데이터를 찾기 원하는 지역의 주소를 입력함. 그 후 해당 주소의 포트홀 리스트들이 출력되고 포트홀 리스트의 포트홀 선택 시 해당 포트홀의 세부 정보를 출력하는 사이트를 띄움.

### 하드웨어 및 결과물
![image](https://user-images.githubusercontent.com/78334910/174301878-956d66f9-74b5-4231-882a-f3d7cd173057.png)
- 2축 짐벌 기능을 구현하기 위해 위와 같이 설계.  
![image](https://user-images.githubusercontent.com/78334910/174302067-a3b2c98d-7b42-450e-9213-318c39355516.png)
- 최종 구현물, 실험을 위해 RC카에 부착.
![image](https://user-images.githubusercontent.com/78334910/174302560-dbc4be5d-4e0d-406d-abf7-b629880e30a1.png)  
- 포트홀을 인식하여 server로 보낸 이미지와 gps 좌표를 이용한 주소가 출력되는 모습

### 기대효과
- 하드웨어를 부착형으로 만들면 일반 차량에 부착함으로써 포트홀 위치를 파악할 수 있어 이에 필요한 인력을 줄일 수 있음.
- 블랙박스를 이용하여 포트홀을 탐지하는 방면으로 생각할 경우, 블랙박스의 기본 프로그램으로 넣어 더 쉽게 포트홀을 탐지할 수 있고 확산력이 더 커짐.
- 통신과 관련된 부분은 차량의 네트워크를 이용하거나 포트홀의 정보를 축적하게 만들고 특정 섹션에 이를 위한 무선 랜을 설치하여 무선 랜이 연결될 경우 한번에 데이터를 보내는 구조로 만들면 해결 가능하다고 생각.
